// ============================= RegExp æ„é€ å‡½æ•° =============================

// RegExpæ„é€ å‡½æ•°çš„å‚æ•°æœ‰ä¸¤ç§æƒ…å†µ.
/*
const regex_1 = new RegExp('xyz', 'i');
const regex_2 = new RegExp(/xyz/i);
// ç­‰ä»·äº var regex = /xyz/i;
*/

// ============================= å­—ç¬¦ä¸²çš„æ­£åˆ™æ–¹æ³• =============================

// å­—ç¬¦ä¸²å¯¹è±¡å…±æœ‰ 4 ä¸ªæ–¹æ³•ï¼Œå¯ä»¥ä½¿ç”¨æ­£åˆ™è¡¨è¾¾å¼ï¼šmatch()ã€replace()ã€search()å’Œsplit()ã€‚
// ES6 å°†è¿™ 4 ä¸ªæ–¹æ³•ï¼Œåœ¨è¯­è¨€å†…éƒ¨å…¨éƒ¨è°ƒç”¨RegExpçš„å®ä¾‹æ–¹æ³•ï¼Œä»è€Œåšåˆ°æ‰€æœ‰ä¸æ­£åˆ™ç›¸å…³çš„æ–¹æ³•ï¼Œå…¨éƒ½å®šä¹‰åœ¨RegExpå¯¹è±¡ä¸Šã€‚

// ============================= u ä¿®é¥°ç¬¦ =============================

// ES6å¯¹æ­£åˆ™å¢åŠ  u ä¿®é¥°ç¬¦ï¼Œå«ä¹‰ä¸ºâ€œUnicode æ¨¡å¼â€ï¼Œç”¨æ¥æ­£ç¡®å¤„ç†å¤§äº\uFFFFçš„ Unicode å­—ç¬¦ã€‚ä¹Ÿå°±æ˜¯è¯´ï¼Œä¼šæ­£ç¡®å¤„ç†å››ä¸ªå­—èŠ‚çš„ UTF-16 ç¼–ç ã€‚
/*
/^\uD83D/u.test('\uD83D\uDC2A') // false
/^\uD83D/.test('\uD83D\uDC2A') // true
*/

// ä¸€æ—¦åŠ ä¸Šuä¿®é¥°ç¬¦å·ï¼Œå°±ä¼šä¿®æ”¹ä¸‹é¢è¿™äº›æ­£åˆ™è¡¨è¾¾å¼çš„è¡Œä¸ºã€‚

//ï¼ˆ1ï¼‰ç‚¹å­—ç¬¦
// ç‚¹ï¼ˆ.ï¼‰å­—ç¬¦åœ¨æ­£åˆ™è¡¨è¾¾å¼ä¸­ï¼Œå«ä¹‰æ˜¯é™¤äº†æ¢è¡Œç¬¦ä»¥å¤–çš„ä»»æ„å•ä¸ªå­—ç¬¦ã€‚å¯¹äºç ç‚¹å¤§äº0xFFFFçš„ Unicode å­—ç¬¦ï¼Œç‚¹å­—ç¬¦ä¸èƒ½è¯†åˆ«ï¼Œå¿…é¡»åŠ ä¸Šuä¿®é¥°ç¬¦ã€‚

/*
const s = 'ğ ®·';

console.log(/^.$/.test(s)); // false
console.log(/^.$/u.test(s));// true
*/

//ï¼ˆ2ï¼‰Unicode å­—ç¬¦è¡¨ç¤ºæ³•
// ES6 æ–°å¢äº†ä½¿ç”¨å¤§æ‹¬å·è¡¨ç¤º Unicode å­—ç¬¦ï¼Œè¿™ç§è¡¨ç¤ºæ³•åœ¨æ­£åˆ™è¡¨è¾¾å¼ä¸­å¿…é¡»åŠ ä¸Šuä¿®é¥°ç¬¦ï¼Œæ‰èƒ½è¯†åˆ«å½“ä¸­çš„å¤§æ‹¬å·ï¼Œå¦åˆ™ä¼šè¢«è§£è¯»ä¸ºé‡è¯ã€‚

/*
console.log(/\u{61}/.test('a')); // false
console.log(/\u{61}/u.test('a')); // true
console.log(/\u{20BB7}/u.test('ğ ®·')); // true
*/

// ä¸Šé¢ä»£ç è¡¨ç¤ºï¼Œå¦‚æœä¸åŠ uä¿®é¥°ç¬¦ï¼Œæ­£åˆ™è¡¨è¾¾å¼æ— æ³•è¯†åˆ«\u{61}è¿™ç§è¡¨ç¤ºæ³•ï¼Œåªä¼šè®¤ä¸ºè¿™åŒ¹é… 61 ä¸ªè¿ç»­çš„uã€‚

//ï¼ˆ3ï¼‰é‡è¯
// ä½¿ç”¨uä¿®é¥°ç¬¦åï¼Œæ‰€æœ‰é‡è¯éƒ½ä¼šæ­£ç¡®è¯†åˆ«ç ç‚¹å¤§äº0xFFFFçš„ Unicode å­—ç¬¦ã€‚

/*
/a{2}/.test('aa') // true
/a{2}/u.test('aa') // true
/ğ ®·{2}/.test('ğ ®·ğ ®·') // false
/ğ ®·{2}/u.test('ğ ®·ğ ®·') // true
*/

//ï¼ˆ4ï¼‰é¢„å®šä¹‰æ¨¡å¼
/*
/^\S$/.test('ğ ®·') // false
/^\S$/u.test('ğ ®·') // true
*/

// ä¸Šé¢ä»£ç çš„\Sæ˜¯é¢„å®šä¹‰æ¨¡å¼ï¼ŒåŒ¹é…æ‰€æœ‰éç©ºç™½å­—ç¬¦ã€‚åªæœ‰åŠ äº†uä¿®é¥°ç¬¦ï¼Œå®ƒæ‰èƒ½æ­£ç¡®åŒ¹é…ç ç‚¹å¤§äº0xFFFFçš„ Unicode å­—ç¬¦ã€‚

/*
// åˆ©ç”¨è¿™ä¸€ç‚¹ï¼Œå¯ä»¥å†™å‡ºä¸€ä¸ªæ­£ç¡®è¿”å›å­—ç¬¦ä¸²é•¿åº¦çš„å‡½æ•°ã€‚
function codePointLength(text) {
  var result = text.match(/[\s\S]/gu);
  return result ? result.length : 0;
}

var s = 'ğ ®·ğ ®·';

s.length // 4
codePointLength(s) // 2
*/

//ï¼ˆ5ï¼‰i ä¿®é¥°ç¬¦
// æœ‰äº› Unicode å­—ç¬¦çš„ç¼–ç ä¸åŒï¼Œä½†æ˜¯å­—å‹å¾ˆç›¸è¿‘ï¼Œæ¯”å¦‚ï¼Œ\u004Bä¸\u212Aéƒ½æ˜¯å¤§å†™çš„Kã€‚
/*
/[a-z]/i.test('\u212A') // false
/[a-z]/iu.test('\u212A') // true
*/

// ============================= RegExp.prototype.unicode å±æ€§ =============================
// æ­£åˆ™å®ä¾‹å¯¹è±¡æ–°å¢unicodeå±æ€§ï¼Œè¡¨ç¤ºæ˜¯å¦è®¾ç½®äº†uä¿®é¥°ç¬¦ã€‚

/*
const r1 = /hello/;
const r2 = /hello/u;

r1.unicode // false
r2.unicode // true
*/

// ============================= y ä¿®é¥°ç¬¦ =============================
// é™¤äº†uä¿®é¥°ç¬¦ï¼ŒES6 è¿˜ä¸ºæ­£åˆ™è¡¨è¾¾å¼æ·»åŠ äº†yä¿®é¥°ç¬¦ï¼Œå«åšâ€œç²˜è¿â€ï¼ˆstickyï¼‰ä¿®é¥°ç¬¦ã€‚

// y å’Œ g éƒ½æ˜¯å…¨å±€åŒ¹é…ï¼ŒåŒºåˆ«åœ¨äºgæ˜¯åœ¨å‰©ä½™ä½ç½®ä¸­åŒ¹é…å³å¯ï¼Œè€Œyéœ€è¦ä»å‰©ä½™çš„ç¬¬ä¸€ä¸ªä½ç½®å¼€å§‹

/*
var s = 'aaa_aa_a';
var r1 = /a+/g;
var r2 = /a+/y;

r1.exec(s) // ["aaa"]
r2.exec(s) // ["aaa"]

// å‰©ä½™éƒ¨åˆ† _aa_a
r1.exec(s) // ["aa"], å‰©ä½™ä½ç½®ä¸­æœ‰åŒ¹é…å³å¯
r2.exec(s) // null, å‰©ä½™ä½ç½®å¼€å¤´ä¸º_ æ‰€ä»¥ä¸ºnull

//ä¿è¯æ¯æ¬¡éƒ½èƒ½å¤´éƒ¨åŒ¹é…ï¼Œyä¿®é¥°ç¬¦å°±ä¼šè¿”å›ç»“æœäº†ã€‚
var _s = 'aaa_aa_a';
var r = /a+_/y;

r.exec(_s) // ["aaa_"]
r.exec(_s) // ["aa_"]
*/

// ä½¿ç”¨lastIndexå±æ€§ï¼Œå¯ä»¥æ›´å¥½åœ°è¯´æ˜yä¿®é¥°ç¬¦ã€‚
/*
const REGEX = /a/g;

// æŒ‡å®šä»2å·ä½ç½®ï¼ˆyï¼‰å¼€å§‹åŒ¹é…
REGEX.lastIndex = 2;

// åŒ¹é…æˆåŠŸ
const match = REGEX.exec('xaya');

// åœ¨3å·ä½ç½®åŒ¹é…æˆåŠŸ
match.index // 3

// ä¸‹ä¸€æ¬¡åŒ¹é…ä»4å·ä½å¼€å§‹
REGEX.lastIndex // 4

// 4å·ä½å¼€å§‹åŒ¹é…å¤±è´¥
REGEX.exec('xaya') // null
*/

/*
const REGEX = /a/y;

// æŒ‡å®šä»2å·ä½ç½®å¼€å§‹åŒ¹é…
REGEX.lastIndex = 2;

// ä¸æ˜¯ç²˜è¿ï¼ŒåŒ¹é…å¤±è´¥
REGEX.exec('xaya') // null

// æŒ‡å®šä»3å·ä½ç½®å¼€å§‹åŒ¹é…
REGEX.lastIndex = 3;

// 3å·ä½ç½®æ˜¯ç²˜è¿ï¼ŒåŒ¹é…æˆåŠŸ
const match = REGEX.exec('xaya');
match.index // 3
REGEX.lastIndex // 4
*/

// å®é™…ä¸Šï¼Œyä¿®é¥°ç¬¦å·éšå«äº†å¤´éƒ¨åŒ¹é…çš„æ ‡å¿—^ã€‚
/*
/b/y.exec('aba')
// null
*/

/*
const REGEX = /a/gy;
'aaxa'.replace(REGEX, '-') // '--xa', å› ä¸ºæœ€åä¸€ä¸ªaä¸æ˜¯ä¸‹ä¸€æ¬¡åŒ¹é…çš„å¤´éƒ¨ æ‰€ä»¥ä¸æ›¿æ¢
*/

/*
'a1a2a3'.match(/a\d/y) // ["a1"]
'a1a2a3'.match(/a\d/gy) // ["a1", "a2", "a3"]
*/

// yä¿®é¥°ç¬¦çš„ä¸€ä¸ªåº”ç”¨ï¼Œæ˜¯ä»å­—ç¬¦ä¸²æå– tokenï¼ˆè¯å…ƒï¼‰ï¼Œyä¿®é¥°ç¬¦ç¡®ä¿äº†åŒ¹é…ä¹‹é—´ä¸ä¼šæœ‰æ¼æ‰çš„å­—ç¬¦ã€‚
// const TOKEN_Y = /\s*(\+|[0-9]+)\s*/y;
// const TOKEN_G  = /\s*(\+|[0-9]+)\s*/g;
//
// tokenize(TOKEN_Y, '3 + 4')
// // [ '3', '+', '4' ]
// tokenize(TOKEN_G, '3 + 4')
// // [ '3', '+', '4' ]
//
// function tokenize(TOKEN_REGEX, str) {
//     let result = [];
//     let match;
//     while (match = TOKEN_REGEX.exec(str)) {
//         result.push(match[1]);
//     }
//     return result;
// }

// tokenize(TOKEN_Y, '3x + 4')
// // [ '3' ]
// tokenize(TOKEN_G, '3x + 4')
// // [ '3', '+', '4' ]
// gä¿®é¥°ç¬¦ä¼šå¿½ç•¥éæ³•å­—ç¬¦ï¼Œè€Œyä¿®é¥°ç¬¦ä¸ä¼šï¼Œè¿™æ ·å°±å¾ˆå®¹æ˜“å‘ç°é”™è¯¯ã€‚

// ============================= RegExp.prototype.sticky å±æ€§ =============================
// ä¸yä¿®é¥°ç¬¦ç›¸åŒ¹é…ï¼ŒES6 çš„æ­£åˆ™å®ä¾‹å¯¹è±¡å¤šäº†stickyå±æ€§ï¼Œè¡¨ç¤ºæ˜¯å¦è®¾ç½®äº†yä¿®é¥°ç¬¦ã€‚
/*
var r = /hello\d/y;
r.sticky // true
*/

// ============================= RegExp.prototype.flags å±æ€§ =============================
// ES6 ä¸ºæ­£åˆ™è¡¨è¾¾å¼æ–°å¢äº†flagså±æ€§ï¼Œä¼šè¿”å›æ­£åˆ™è¡¨è¾¾å¼çš„ä¿®é¥°ç¬¦ã€‚
/*
// ES5 çš„ source å±æ€§
// è¿”å›æ­£åˆ™è¡¨è¾¾å¼çš„æ­£æ–‡
console.log(/abc/ig.source);
// "abc"

// ES6 çš„ flags å±æ€§
// è¿”å›æ­£åˆ™è¡¨è¾¾å¼çš„ä¿®é¥°ç¬¦
console.log(/abc/ig.flags);
// 'gi'
*/

// ============================= s ä¿®é¥°ç¬¦ï¼šdotAll æ¨¡å¼ =============================
// . åŒ¹é…ä»»æ„å•ä¸ªå­—ç¬¦
// ä¸åŒ¹é…utf-16 å¯ä»¥é€šè¿‡ u ä¿®é¥°ç¬¦è§£å†³
// ä¸åŒ¹é… è¡Œ ä¿®é¥°ç¬¦ï¼ŒåŒ…æ‹¬ï¼š
/*
U+000A æ¢è¡Œç¬¦ï¼ˆ\nï¼‰
U+000D å›è½¦ç¬¦ï¼ˆ\rï¼‰
U+2028 è¡Œåˆ†éš”ç¬¦ï¼ˆline separatorï¼‰
U+2029 æ®µåˆ†éš”ç¬¦ï¼ˆparagraph separatorï¼‰
*/

/*
console.log(/foo.bar/.test('foo\nbar')); //false
// å¸Œæœ›åŒ¹é…ä»»æ„å•ä¸ªå­—ç¬¦çš„ä¸€ç§å˜é€šå†™æ³•
console.log(/foo[^]bar/.test('foo\nbar')); //true
// s ä¿®é¥°ç¬¦ åŒ¹é…ä»»æ„å•ä¸ªå­—ç¬¦
console.log(/foo.bar/s.test('foo\nbar')); // true
*/

// . /s æˆä¸ºdotAllæ¨¡å¼ è¿˜å¢åŠ äº†dotAllå±æ€§ è¿”å›è¯¥æ­£åˆ™æ˜¯å¦å¤„åœ¨dotAllæ¨¡å¼
/*
const re = /foo.bar/s;
// å¦ä¸€ç§å†™æ³•
// const re = new RegExp('foo.bar', 's');

re.test('foo\nbar') // true
re.dotAll // true
re.flags // 's'
*/

// /sä¿®é¥°ç¬¦å’Œå¤šè¡Œä¿®é¥°ç¬¦/mä¸å†²çªï¼Œä¸¤è€…ä¸€èµ·ä½¿ç”¨çš„æƒ…å†µä¸‹ï¼Œ.åŒ¹é…æ‰€æœ‰å­—ç¬¦ï¼Œè€Œ^å’Œ$åŒ¹é…æ¯ä¸€è¡Œçš„è¡Œé¦–å’Œè¡Œå°¾ã€‚

//

// "å…ˆè¡Œæ–­è¨€"æŒ‡çš„æ˜¯ï¼Œxåªæœ‰åœ¨yå‰é¢æ‰åŒ¹é…ï¼Œå¿…é¡»å†™æˆ/x(?=y)/ã€‚
// "å…ˆè¡Œå¦å®šæ–­è¨€"æŒ‡çš„æ˜¯ï¼Œxåªæœ‰ä¸åœ¨yå‰é¢æ‰åŒ¹é…ï¼Œå¿…é¡»å†™æˆ/x(?!y)/

/*
console.log(/\d+(?=%)/.exec('100% of US presidents have been male'));  // ["100"]
console.log(/\d+(?!%)/.exec('thatâ€™s all 44 of them'));                 // ["44"]

// "åè¡Œæ–­è¨€"æ­£å¥½ä¸"å…ˆè¡Œæ–­è¨€"ç›¸åï¼Œxåªæœ‰åœ¨yåé¢æ‰åŒ¹é…ï¼Œå¿…é¡»å†™æˆ/(?<=y)x/ã€‚
// "åè¡Œå¦å®šæ–­è¨€"åˆ™ä¸"å…ˆè¡Œå¦å®šæ–­è¨€"ç›¸åï¼Œxåªæœ‰ä¸åœ¨yåé¢æ‰åŒ¹é…ï¼Œå¿…é¡»å†™æˆ/(?<!y)x/

console.log(/(?<=\$)\d+/.exec('Benjamin Franklin is on the $100 bill')); // ["100"]
console.log(/(?<!\$)\d+/.exec('itâ€™s is worth about â‚¬90'));               // ["90"]
*/

// ä»¥ä¸Šæ‹¬å·ä¸­çš„å†…å®¹å‡ä¸è®¡å…¥è¿”å›ç»“æœ

/*
const RE_DOLLAR_PREFIX = /(?<=\$)foo/g;
'$foo %foo foo'.replace(RE_DOLLAR_PREFIX, 'bar');
// '$bar %foo foo'
*/

// å…ˆå³åå·¦ ä¸ç¬¦åˆé¢„æœŸçš„è¡Œä¸º
/*
console.log(/(?<=(\d+)(\d+))$/.exec('1053')); // ["", "1", "053"]
console.log(/^(\d+)(\d+)$/.exec('1053')); // ["1053", "105", "3"]
*/

// ä¸Šé¢ä»£ç ä¸­ï¼Œéœ€è¦æ•æ‰ä¸¤ä¸ªç»„åŒ¹é…ã€‚
// æ²¡æœ‰â€œåè¡Œæ–­è¨€â€æ—¶ï¼Œç¬¬ä¸€ä¸ªæ‹¬å·æ˜¯è´ªå©ªæ¨¡å¼ï¼Œç¬¬äºŒä¸ªæ‹¬å·åªèƒ½æ•è·ä¸€ä¸ªå­—ç¬¦ï¼Œæ‰€ä»¥ç»“æœæ˜¯105å’Œ3ã€‚
// è€Œâ€œåè¡Œæ–­è¨€â€æ—¶ï¼Œç”±äºæ‰§è¡Œé¡ºåºæ˜¯ä»å³åˆ°å·¦ï¼Œç¬¬äºŒä¸ªæ‹¬å·æ˜¯è´ªå©ªæ¨¡å¼ï¼Œç¬¬ä¸€ä¸ªæ‹¬å·åªèƒ½æ•è·ä¸€ä¸ªå­—ç¬¦ï¼Œæ‰€ä»¥ç»“æœæ˜¯1å’Œ053ã€‚

// â€œåè¡Œæ–­è¨€â€çš„åæ–œæ å¼•ç”¨ï¼Œä¹Ÿä¸é€šå¸¸çš„é¡ºåºç›¸åï¼Œå¿…é¡»æ”¾åœ¨å¯¹åº”çš„é‚£ä¸ªæ‹¬å·ä¹‹å‰ã€‚
/*
console.log(/(?<=(o)d\1)r/.exec('hodor'));  // null
console.log(/(?<=\1d(o))r/.exec('hodor'));  // ["r", "o"]
*/

// ============================= Unicode å±æ€§ç±» =============================
// ES2018 å¼•å…¥äº†ä¸€ç§æ–°çš„ç±»çš„å†™æ³•\p{...}å’Œ\P{...}ï¼Œå…è®¸æ­£åˆ™è¡¨è¾¾å¼åŒ¹é…ç¬¦åˆ Unicode æŸç§å±æ€§çš„æ‰€æœ‰å­—ç¬¦ã€‚
// ä½¿ç”¨æ—¶å¿…é¡»åŠ ä¸Š u ä¿®é¥°ç¬¦

/*
const regexGreekSymbol = /\p{Script=Greek}/u;
console.log(regexGreekSymbol.test('Ï€'));// true
*/

// \P{â€¦}æ˜¯\p{â€¦}çš„åå‘åŒ¹é…ï¼Œå³åŒ¹é…ä¸æ»¡è¶³æ¡ä»¶çš„å­—ç¬¦ã€‚
/*
const regex = /^\p{Decimal_Number}+$/u;
console.log(regex.test('ğŸğŸğŸ‘ğŸœğŸğŸğŸ©ğŸªğŸ«ğŸ¬ğŸ­ğŸ®ğŸ¯ğŸºğŸ»ğŸ¼')); // true
*/

/*
// åŒ¹é…æ‰€æœ‰æ•°å­—
const regex = /^\p{Number}+$/u;
console.log(regex.test('Â²Â³Â¹Â¼Â½Â¾')); // true
console.log(regex.test('ã‰›ã‰œã‰')); // true
console.log(regex.test('â… â…¡â…¢â…£â…¤â…¥â…¦â…§â…¨â…©â…ªâ…«')); // true
*/

/*
// åŒ¹é…æ‰€æœ‰ç©ºæ ¼
\p{White_Space}

// åŒ¹é…å„ç§æ–‡å­—çš„æ‰€æœ‰å­—æ¯ï¼Œç­‰åŒäº Unicode ç‰ˆçš„ \w
[\p{Alphabetic}\p{Mark}\p{Decimal_Number}\p{Connector_Punctuation}\p{Join_Control}]

// åŒ¹é…å„ç§æ–‡å­—çš„æ‰€æœ‰éå­—æ¯çš„å­—ç¬¦ï¼Œç­‰åŒäº Unicode ç‰ˆçš„ \W
[^\p{Alphabetic}\p{Mark}\p{Decimal_Number}\p{Connector_Punctuation}\p{Join_Control}]

// åŒ¹é… Emoji
/\p{Emoji_Modifier_Base}\p{Emoji_Modifier}?|\p{Emoji_Presentation}|\p{Emoji}\uFE0F/gu

// åŒ¹é…æ‰€æœ‰çš„ç®­å¤´å­—ç¬¦
const regexArrows = /^\p{Block=Arrows}+$/u;
regexArrows.test('â†â†‘â†’â†“â†”â†•â†–â†—â†˜â†™â‡â‡â‡‘â‡’â‡“â‡”â‡•â‡–â‡—â‡˜â‡™â‡§â‡©') // true
*/

// ============================= å…·åç»„åŒ¹é… =============================

// åœ†æ‹¬å·ä¸ºç»„åŒ¹é…
/*
const RE_DATE = /(\d{4})-(\d{2})-(\d{2})/;
const matchObj = RE_DATE.exec('1999-12-31');
const year = matchObj[1]; // 1999
const month = matchObj[2]; // 12
const day = matchObj[3]; // 31
*/

// ç»„åŒ¹é…çš„é—®é¢˜æ˜¯åªèƒ½æ ¹æ®é¡ºåºç”¨æ•°å­—åºå·æ¥å¼•ç”¨ã€‚
// ES2018 å¼•å…¥äº†å…·åç»„åŒ¹é…ï¼ˆNamed Capture Groupsï¼‰ï¼Œå…è®¸ä¸ºæ¯ä¸€ä¸ªç»„åŒ¹é…æŒ‡å®šä¸€ä¸ªåå­—ã€‚
// ?<name> æ•°å­—åºå·ä»æœ‰æ•ˆ
// è‹¥æ— åŒ¹é…groups.name ä¸ºundefined

/*
const RE_DATE = /(?<year>\d{4})-(?<month>\d{2})-(?<day>\d{2})/;

const matchObj = RE_DATE.exec('1999-12-31');
const year = matchObj.groups.year; // 1999
const month = matchObj.groups.month; // 12
const day = matchObj.groups.day; // 31
console.log("year:", year, "month:", month, "day:", day);
*/

// ============================= è§£æ„èµ‹å€¼å’Œæ›¿æ¢ =============================
/*
let {groups: {one, two}} = /^(?<one>.*):(?<two>.*)$/u.exec('foo:bar');
console.log(one);  // foo
console.log(two);  // bar
*/

/*
// å­—ç¬¦ä¸²æ›¿æ¢æ—¶ï¼Œä½¿ç”¨${name}å¼•ç”¨å…·åç»„
let re = /(?<year>\d{4})-(?<month>\d{2})-(?<day>\d{2})/u;

const s = '2015-01-02'.replace(re, '$<day>/$<month>/$<year>');
console.log(s);
// '02/01/2015'
*/

/*
let re = /(?<year>\d{4})-(?<month>\d{2})-(?<day>\d{2})/u;
const s = '2015-01-02'.replace(re, (
    matched, // æ•´ä¸ªåŒ¹é…ç»“æœ 2015-01-02
    capture1, // ç¬¬ä¸€ä¸ªç»„åŒ¹é… 2015
    capture2, // ç¬¬äºŒä¸ªç»„åŒ¹é… 01
    capture3, // ç¬¬ä¸‰ä¸ªç»„åŒ¹é… 02
    position, // åŒ¹é…å¼€å§‹çš„ä½ç½® 0
    S, // åŸå­—ç¬¦ä¸² 2015-01-02
    groups // å…·åç»„æ„æˆçš„ä¸€ä¸ªå¯¹è±¡ {year, month, day}
) => {
    // console.log(matched, capture1, capture2, capture3, position, S, groups);
    let {day, month, year} = groups;
    return `${day}/${month}/${year}`;
});
console.log(s);
*/

// ============================= å¼•ç”¨ =============================
// å¦‚æœè¦åœ¨æ­£åˆ™è¡¨è¾¾å¼å†…éƒ¨å¼•ç”¨æŸä¸ªâ€œå…·åç»„åŒ¹é…â€ï¼Œå¯ä»¥ä½¿ç”¨\k<ç»„å>çš„å†™æ³•ã€‚

/*
const RE_TWICE = /^(?<word>[a-z]+)!\k<word>$/;
RE_TWICE.test('abc!abc') // true
RE_TWICE.test('abc!ab') // false
*/

// æ•°å­—å¼•ç”¨ï¼ˆ\1ï¼‰ä¾ç„¶æœ‰æ•ˆã€‚
/*
const RE_TWICE = /^(?<word>[a-z]+)!\1$/;
RE_TWICE.test('abc!abc') // true
RE_TWICE.test('abc!ab') // false
*/

// ============================= String.prototype.matchAll =============================
// ç›®å‰æœ‰ä¸€ä¸ªææ¡ˆï¼Œå¢åŠ äº†String.prototype.matchAllæ–¹æ³•ï¼Œå¯ä»¥ä¸€æ¬¡æ€§å–å‡ºæ‰€æœ‰åŒ¹é…ã€‚ä¸è¿‡ï¼Œå®ƒè¿”å›çš„æ˜¯ä¸€ä¸ªéå†å™¨ï¼ˆIteratorï¼‰ï¼Œè€Œä¸æ˜¯æ•°ç»„ã€‚
const string = 'test1test2test3';

// g ä¿®é¥°ç¬¦åŠ ä¸åŠ éƒ½å¯ä»¥
const regex = /t(e)(st(\d?))/g;

for (const match of string.matchAll(regex)) {
    console.log(match);
}
// ["test1", "e", "st1", "1", index: 0, input: "test1test2test3"]
// ["test2", "e", "st2", "2", index: 5, input: "test1test2test3"]
// ["test3", "e", "st3", "3", index: 10, input: "test1test2test3"]

/*
// éå†å™¨è½¬ä¸ºæ•°ç»„
// è½¬ä¸ºæ•°ç»„æ–¹æ³•ä¸€
[...string.matchAll(regex)]

// è½¬ä¸ºæ•°ç»„æ–¹æ³•äºŒ
Array.from(string.matchAll(regex));
*/
